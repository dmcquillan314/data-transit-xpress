<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" >
    <title>Peapod.com Living Styleguide</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="css/peapodLivingStyleGuide.css">
    <link rel="stylesheet" href="public/style.css">

    <!--[if lt IE 9]>
    <script src="public/html5shiv.js"></script>
    <![endif]-->
  </head>
  <body id="kss-node">
    <div class="kss-wrapper">
      <div class="kss-sidebar kss-fixed">
        <div class="kss-sidebar-inner">
          <header class="kss-header">
            <img src="http://i4.peapod.com/c/BU/BUOKC.png" alt="Peapod logo" height="53" width="155" class="styleguide-title-logo" />
            <h2 class="kss-doc-title">Living Styleguide</h2>
          </header>
          <nav class="kss-nav">
            <ul class="kss-menu" data-kss-ref="6">
              <li class="kss-menu-item"><a href="./index.html"><span class="kss-ref">0</span><span class="kss-name">Overview</span></a></li>
              
              <li class="kss-menu-item"><a href="section-1.html"><span class="kss-ref">1</span><span class="kss-name">Peapod Color Palette</span></a></li>
              
              <li class="kss-menu-item"><a href="section-2.html"><span class="kss-ref">2</span><span class="kss-name">Typography</span></a></li>
              
              <li class="kss-menu-item"><a href="section-3.html"><span class="kss-ref">3</span><span class="kss-name">Logos</span></a></li>
              
              <li class="kss-menu-item"><a href="section-4.html"><span class="kss-ref">4</span><span class="kss-name">Buttons</span></a></li>
              
              <li class="kss-menu-item"><a href="section-5.html"><span class="kss-ref">5</span><span class="kss-name">Forms</span></a></li>
              
              <li class="kss-menu-item"><a href="section-6.html"><span class="kss-ref">6</span><span class="kss-name">Promotions Modules</span></a></li>
              
              <li class="kss-menu-item"><a href="section-7.html"><span class="kss-ref">7</span><span class="kss-name">Product views</span></a></li>
              
            </ul>
            
            <ul class="kss-menu-child">
              
              
              
              
              
              <li class="kss-menu-item"><a href="#section-6.1"><span class="kss-ref">6.1</span><span class="kss-name">Promotional blocks</span></a></li>
              
              
            </ul>
            
          </nav>
        </div>
      </div>
      <div class="kss-content">
        
          
        <article class="kss-article-6">
          <section id="section-6" class="kss-section kss-depth-1">
              
                <h1 class="kss-title"><span class="kss-ref">6</span> Promotions Modules</h1>
              
            
            
            <div class="kss-description">
              <p>These are blocks for promotional tiles in varying sizes and colors.
Images used in tiles should never contain text (with the exception of logos or similar images).</p>

            </div>
            
            
          </section>
          
        <article class="kss-article-6.1">
          <section id="section-6.1" class="kss-section kss-depth-2">
              
                <h2 class="kss-title"><span class="kss-ref">6.1</span> Promotional blocks</h2>
              
            
            
            <div class="kss-description">
              <div class="kss-promo-container">
    <div class="promo-tile promo-tile--fullwidth promo-tile--bg-green">
         <div class="promo-tile--text"><h6>Organic Veggies</h6><span>We have a wide variety of organic veggies that are super fresh and tasty!</span></div>
         <div class="promo-tile--image image--fit-width"><img src="http://i4.peapod.com/c/G4/G4MYI.jpg" alt="carrots"></div>
    </div>
</div>
<div class="kss-promo-container">
     <div class="promo-tile promo-tile--onethird promo-tile--bg-blue">
         <div class="promo-tile--text"><h6>Happy Passover</h6><span>We&apos;ve got a large selection of Jewish delicacies</span></div>
         <div class="promo-tile--image image--fit-width"><img src="http://i4.peapod.com/c/B6/B6WY5.png" alt="matzoh"></div>
     </div>
     <div class="promo-tile promo-tile--onethird promo-tile--bg-green">
          <div class="promo-tile--text"><h6>Gluten-Free Groceries</h6><span>Find a variety of baked goods without gluten of course</span></div>
          <div class="promo-tile--image image--fit-width"><img src="http://i4.peapod.com/c/PY/PYM4H.png" alt="muffins"></div>
     </div>
     <div class="promo-tile promo-tile--onethird promo-tile--bg-orange omega">
         <div class="promo-tile--text"><h6>Organic Fruit</h6><span>We have a ton of fruits that are super duper fresh and tasty!</span></div>
         <div class="promo-tile--image image--fit-width"><img src="http://i4.peapod.com/c/S8/S82NM.png" alt="fruit"></div>
     </div>
</div>
<div class="kss-promo-container">
     <div class="promo-tile promo-tile--half promo-tile--bg-white-green">
         <div class="promo-tile--text"><h6>Free delivery for the first two months!</h6><span>Enter code #YIPPEE during checkout</span></div>
         <div class="promo-tile--image image--fit-height"><img src="http://i4.peapod.com/c/DW/DW8DK.png" alt="Peapod delivery person"></div>
     </div>
     <div class="promo-tile promo-tile--half promo-tile--bg-white-blue omega">
         <div class="promo-tile--text"><h6>Try our new Order Starter</h6><span>It&apos;s a quick way to find stuff you like.</spa></div>
         <div class="promo-tile--image image--fit-height"><img src="http://i4.peapod.com/c/GF/GFLEF.png" alt="shopping bag"></div>
     </div>
</div>
<div class="kss-promo-container">
     <div class="promo-tile promo-tile--fullwidth promo-tile--bg-green promo-tile--single-line">
         <div class="promo-tile--text"><h6>Purchase E-Gift Cards For Someone Special!</h6></div>
         <div class="promo-tile--image image--fit-height"><img src="http://i4.peapod.com/c/DZ/DZPU8.png" alt="Peapod gift cards"></div>
     </div>
</div>
            </div>
            
            
          </section>
          
          </article>
          
        <footer class="kss-footer">
          <div>Created using <a href="https://github.com/hughsk/kss-node">kss-node</a>.</div>
        </footer>
      </div>
    </div>
    <script src="public/kss.js"></script>
    <script src="public/jquery-1.9.1.min.js"></script>
    <!--[if gt IE 8]><!-->
    <script src="public/rainbow.min.js"></script>
    <!--<![endif]-->
    <script src="public/main.js"></script>
    <script>
        var tempRgbArray = [];
        
        // calculate color luminance. Note that this uses ecmascript6 "map" method, so requies new-ish browsers
        function luminance(r, g, b) {
            var a = [r,g,b].map(function(v) {
                v /= 255;
                return (v <= 0.03928) ?
                    v / 12.92 :
                    Math.pow( ((v+0.055)/1.055), 2.4 );
                });
            return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
        }

        // compare luminances
        function compareLuminance(luminance1, luminance2) {
            var colorRatio;
            // console.log("lum 1:" + luminance1 + ", lum2:" + luminance2);
            if (luminance1 >= luminance2) {
                colorRatio = luminance1 / luminance2;
                //console.log("lum1 greater");
            }
    
            else {
                colorRatio = luminance2 / luminance1;
                //console.log("lum2 greater");
            }

            return colorRatio;
        }

        // set colors as rgb arrays
        function getRgbArray(rgbStr) {
            var rgbString = rgbStr.slice(4,-1);
            var rgbArray = rgbString.split(", ");
            return rgbArray;
        }

        // set luminance of default text color (uses $darkest-grey)
        function setTextColorLuminance() {
            var darkestGreyColor = $(".colors-darkest-grey").css("background-color");
            var darkestGreyArray = getRgbArray(darkestGreyColor);
            var darkestGreyLum = luminance(darkestGreyArray[0], darkestGreyArray[1], darkestGreyArray[2]);
            return darkestGreyLum;
        }

        // set default comparison luminances
        var whiteLuminance = luminance(255,255,255);
        var textColorLuminance = setTextColorLuminance();

        $(document).ready(function(){
            $("div.colors").each(function(){
                var tempColor = $(this).css("background-color"); // retrieves RGB value by default
                // console.log("tempColor=" + tempColor);
                tempRgbArray = getRgbArray(tempColor);
                // console.log("tempRgbArray=" + tempRgbArray);
                tempLuminance = (luminance(tempRgbArray[0], tempRgbArray[1], tempRgbArray[2])) + 0.05;
                // console.log("tempLuminance=" + tempLuminance);
                var colorRatio_white = compareLuminance(tempLuminance, whiteLuminance);
                var colorRatio_text = compareLuminance(tempLuminance, textColorLuminance);
                var colorRatio_white_rnd = Math.round(colorRatio_white * 10) / 10;
                var colorRatio_text_rnd = Math.round(colorRatio_text * 10) / 10;
                // console.log("white contrast:" + colorRatio_white_rnd);
                console.log("text contrast:" + colorRatio_text_rnd );

                var wcagStatusDiv_white = '<span class="kss-color-status kss-color-status--white"></span>';
                var wcagStatusDiv_text = '<span class="kss-color-status kss-color-status--text"></span>';

                $(this).next(".kss-wcag").find(".kss-wcag-contrast-white").text(colorRatio_white_rnd);
                $(this).next(".kss-wcag").find(".kss-wcag-contrast-white").prepend(wcagStatusDiv_white);
                if ( colorRatio_white_rnd >=4.5 ) {
                    $(this).next(".kss-wcag").find(".kss-color-status--white").addClass("wcag-aa-pass").addClass("icon_like");
                }

                else if (colorRatio_white_rnd >= 3 ) {
                    $(this).next(".kss-wcag").find(".kss-color-status--white").addClass("wcag-a-pass").addClass("icon_like");
                }

                else {
                    $(this).next(".kss-wcag").find(".kss-color-status--white").addClass("icon_dislike");
                }

                $(this).next(".kss-wcag").find(".kss-wcag-contrast-text").text(colorRatio_text_rnd);
                $(this).next(".kss-wcag").find(".kss-wcag-contrast-text").prepend(wcagStatusDiv_text);
                if ( colorRatio_text_rnd >=4.5 ) {
                    $(this).next(".kss-wcag").find(".kss-color-status--text").addClass("wcag-aa-pass").addClass("icon_like");
                }

                else if (colorRatio_text_rnd >= 3 ) {
                    $(this).next(".kss-wcag").find(".kss-color-status--text").addClass("wcag-a-pass").addClass("icon_like");
                }

                else {
                    $(this).next(".kss-wcag").find(".kss-color-status--text").addClass("icon_dislike");
                }
            });
        });

    </script>
  </body>
</html>